<div class="card-container" style="padding:20px;">
    <!--WHITEFRAME START-->
    <md-whiteframe class="md-whiteframe-z1" layout layout-align="center center" style="border:1px solid #ccc;max-width:960px;margin:0 auto" ng-repeat="item in invoiceArray">
        <form name="editForm"  style="width:960px;" ng-controller="AppCtrl as ctrl"  >
            <md-content flex>
                <div layout layout-sm="column" layout-margin flex>
                    <div flex="20">
                        <label>Recurring Profile No:</label>
                        <label ng-if="item.invoiceNo == '-999'">{{item.profileName}}</label>
                        <label ng-if="item.invoiceNo != '-999'">{{item.profileRefName}}</label>
                    </div>
                    <div flex>
                       <span style="padding-right: 15px; padding-left: 15px; font-size:13px; width:70px; height:40px; border: 1px solid green;background-color: #4CAF50;" ng-if="item.status == 'Active'">
                        <b style=" width:70px; font-color:#FFFFFF;">
                            <font color="white">Active</font>
                        </b>
                    </span>
                    <span style="padding-right: 15px; padding-left: 15px; font-size:13px; width:70px; height:40px; border: 1px solid #000000; background-color: #000000;" ng-if="item.status == 'Cancelled'">
                                <b style="width:70px; font-color:#FFFFFF;">
                                    <font color="white">Cancelled</font>
                                </b>
                            </span>
                            <span style="padding-right: 15px; padding-left: 15px; font-size:13px; width:70px; height:40px; border: 1px solid #D2691E;background-color: #D2691E;" ng-if="item.status == 'Completed'">
                                <b style="width:70px; font-color:#FFFFFF;">
                                    <font color="white">Completed</font>
                                </b>
                            </span>
                             <span style="padding-right: 15px; padding-left: 15px; font-size:13px; width:70px; height:40px; border: 1px solid #696969;background-color: #696969;" ng-if="item.status == 'Draft'">
                                <b style="width:70px; font-color:#FFFFFF;">
                                    <font color="white">Draft</font>
                                </b>
                            </span>
                    </div>
                    <div  style="margin-top:-20px;">
                        <md-button ng-click="print()" style="height:30px;" aria-label="change address" href>
                            <md-icon md-svg-icon="img/ic_print_24px.svg" style="height:20px; width:20px;"></md-icon>
                        </md-button>
                        <md-button ng-click="download()" style="height:30px;" aria-label="change address" href>
                            <md-icon md-svg-icon="img/ic_file_download_24px.svg" style="height:20px; width:20px;"></md-icon>
                        </md-button>
                        <md-button ng-click="email(item)" style="height:30px;" aria-label="change address" href>
                            <md-icon md-svg-icon="img/ic_email_24px.svg" style="height:20px; width:20px;"></md-icon>
                        </md-button>
                        <md-menu md-position-mode="target-right target" >
                            <md-button href aria-label="Open demo menu" class="md-icon-button"  ng-click="$mdOpenMenu()">
                                <md-icon md-menu-origin md-svg-src="img/ic_more_horiz_24px.svg"style="margin-top:10px;" ></md-icon>
                            </md-button>
                            <md-menu-content width="4">
                               <md-menu-item ng-if="item.status != 'Cancelled'">
                                    <md-button href ng-click="cancelStatus(item)">
                                        <p>Cancel</p>
                                        <md-icon md-menu-align-target ></md-icon>
                                    </md-button>
                                </md-menu-item>
                                <md-menu-item ng-if="item.status != 'Cancelled'">
                                    <md-button href ng-click="EditRecurringInvoice(item)">
                                        <p>Edit</p>
                                        <md-icon href md-menu-align-target ></md-icon>
                                    </md-button>
                                </md-menu-item>
                                <md-menu-item ng-if="item.status != 'Cancelled'">
                                    <md-button href ng-click="copyRecurringInvoice(item)">
                                        <p>Copy</p>
                                        <md-icon md-menu-align-target ></md-icon>
                                    </md-button>
                                </md-menu-item>
                                <md-menu-item >
                                    <md-button href ng-click="deleteRecurringInvoice(item)">
                                        <p>Delete</p>
                                        <md-icon md-menu-align-target ></md-icon>
                                    </md-button>
                                </md-menu-item>
                            </md-menu-content>
                        </md-menu>
                    </div>
                </div>
                <md-divider></md-divider>
                <div layout layout-sm="column" layout-margin flex>
                    <div style="width:240px; height:80px; border: 1px solid #FF8C00;background-color:#FF8C00;" >
                        <center style="font-color:#FFFFFF;">
                            <h4 style="color:#FFFFFF;">START DATE</h4>
                               <p style="color:#FFFFFF; margin-top:-20px;"><b>{{item.Startdate|date}}</b></p>
                               <p style="color:#FFFFFF; margin-top:-20px;"> Next Invoice {{item.Startdate|date}}</p>
                        </center>
                    </div>
                    <!-- <div flex="2" class="blankspace"></div> -->
                    <div style=" width:240px; height:80px; border: 1px solid #87CEEB;background-color:#87CEEB;" >
                        <center>
                            <h4 style="color:#FFFFFF;">billing Frequency</h4>
                            <p style="color:#FFFFFF; margin-top:-20px;"><b>{{item.billingFrequency}}</b></p>
                        </center>
                    </div>
                    <!-- <div flex="2" class="blankspace"></div> -->
                    <div style=" width:240px; height:80px; border: 1px solid #708090;background-color:#708090;" >
                        <center>
                            <h4 style="color:#FFFFFF;" >Occurences</h4>
                               <p style="color:#FFFFFF; margin-top:-20px;"> <b>{{item.occurences}}</b></p>
                        </center>
                    </div>
                    <!-- <div flex="2" class="blankspace"></div> -->
                    <div style=" width:240px; height:80px; border: 1px solid #3CB371;background-color:#3CB371;" >
                        <center>
                            <h4 style="color:#FFFFFF;">Last Invoice</h4>
                               <p style="color:#FFFFFF; margin-top:-20px;"> <b>{{}}</b></p>
                        </center>
                    </div>
                </div>
                <div layout layout-sm="column" layout-margin  flex >
                    <div flex="5" class="blankspace"></div>
                    <h1 style="">Recurring Profile</h1>
                </div>
                <div layout layout-sm="column" layout-margin flex style="margin-top:-20px;">
                    <div flex="5" class="blankspace"></div>
                    <label ng-if="item.invoiceNo == '-999'">#INV {{item.profileRefName}}</label>
                    <label ng-if="item.invoiceNo != '-999'">#INV {{item.profileRefName}}</label>
                </div>
                <div layout layout-sm="column" layout-margin style="margin-top:10px;" flex>
                <div flex="55" class="blankspace"></div>
                    <label>To:</label>
                    
                </div>
                <div layout layout-sm="column" layout-margin style="margin-top:-10px;" flex>
                <div flex="5" class="blankspace"></div>
                    <label flex="15">Start Date</label>
                    <label flex="15"> {{item.Startdate|date}}</label>
                    <div flex="15" class="blankspace"></div>
                    <label><b>{{item.Name}}</b></label>
                </div>
                <div layout layout-sm="column" layout-margin style="margin-top:-15px;" flex>
                <div flex="5" class="blankspace"></div>
                    <label flex="15">Billing Frequency</label>
                    <label flex="15"> {{item.billingFrequency}}</label>
                    <div flex="15" class="blankspace"></div>
                    <label>{{street}}</label>
                    
                </div>
                 <div layout layout-sm="column" layout-margin style="margin-top:-15px;" flex>
                <div flex="5" class="blankspace"></div>
                    <label flex="15">Occurences</label>
                    <label flex="15"> {{item.occurences}}</label>
                    <div flex="15" class="blankspace"></div>
                   <label>{{city}},{{country}}</label>
                </div>
                <div layout layout-sm="column" layout-margin style="margin-top:-15px;" flex>
                <div flex="5" class="blankspace"></div>
                   <label flex="15">Currency</label>
                    <label flex="15">{{item.BaseCurrency}}</label>
                    <div flex="15" class="blankspace"></div>
                   <label>{{item.Email}}</label>
                </div>
               
                <div layout layout-sm="column" layout-margin style="margin-top:-5px;" flex>
                <div flex="5" class="blankspace"></div>
                    <label flex="15">Comments</label>
                    <label flex>{{item.comments}}</label>
                </div>
                <div layout layout-sm="column" style="margin-top:30px;" layout-margin  flex>
                    <div flex="5" class="blankspace"></div>
                    <table>
                        <tr>
                            <th style="width:340px; border-bottom: 1px solid;text-align: left;" flex>Description</th>
                             <th style="border-bottom: 1px solid;text-align: left;padding-left: 20px;" flex>Qty</th>
                             <th style="border-bottom: 1px solid;text-align: left;padding-left: 20px;" flex>Unit</th>
                             <th style="border-bottom: 1px solid;text-align: left;padding-left: 20px;" flex>Price</th>
                             <th style="border-bottom: 1px solid;text-align: left;padding-left: 20px;" flex>Amount</th>
                        </tr>
                        <tr ng-repeat="prod in item.recurringProducts">
                            <td style="width:340px;border-bottom: 1px solid;text-align: left;" flex><b>{{prod.Productname}}</b><br>
                        Optional product line comment- {{prod.olp}}
                     </td>
                     <td style="padding: 20px;border-bottom: 1px solid;text-align: left;"flex>{{prod.quantity}}</td>
                     <td style="padding: 20px;border-bottom: 1px solid;text-align: left;"flex>{{prod.ProductUnit}}</td>
                     <td style="padding: 20px;border-bottom: 1px solid;text-align: left;"flex>{{prod.price|currency:item.BaseCurrency}}</td>
                     <td style="padding: 20px;border-bottom: 1px solid;text-align: left;"flex>{{prod.amount|currency:item.BaseCurrency}}</td>
                        </tr>
                    </table>
                </div>
                <div layout layout-sm="column" layout-margin  flex>
               <div flex="40"style="margin-left:30px;" class="blankspace"></div>
               <table>
                  <tr >
                     <td style="padding-top:15px;" flex>Sub Total</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{item.total|currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr >
                     <td  style="padding-top:15px;" flex>Discount</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{item.discountAmount|currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr ng-repeat="tt in item.taxAmounts">
                     <td style="padding-top:15px;" flex>{{tt.taxName}}{{tt.rate}}</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{tt.salesTax|currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr >
                     <td style="padding-top:15px;" flex> Shipping</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{item.shipping|currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr >
                     <td style="padding-top:15px;" flex> Total {{item.BaseCurrency}}</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{item.finalamount|currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr ng-if="item.termtype != 'multipleDueDates'">
                     <td style="padding-top:15px;" flex> Paid</td>
                     <td style="padding-left: 170px; padding-top:15px;" ng-repeat="ts in item.MultiDueDAtesArr" flex>
                        {{item.finalamount - ts.balance |currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr style="background-color:#C0C0C0;"  ng-if="item.termtype != 'multipleDueDates'">
                     <td style="padding-top:15px; " flex> <label><b>Balance Due {{item.BaseCurrency}}</b></label></td>
                     <td style="padding-left: 170px; padding-top:15px;" ng-repeat="ts in item.MultiDueDAtesArr"flex><b>{{ts.balance|currency:item.BaseCurrency}}</b></td>
                  </tr>
                  <tr ng-if="item.termtype == 'multipleDueDates'">
                     <td style="padding-top:15px;" flex> Paid</td>
                     <td style="padding-left: 170px; padding-top:15px;" flex>
                        {{item.finalamount - calBalance |currency:item.BaseCurrency}}
                     </td>
                  </tr>
                  <tr style="background-color:#C0C0C0;"  ng-if="item.termtype == 'multipleDueDates'">
                     <td style="padding-top:15px; " flex> <label><b>Balance Due {{item.BaseCurrency}}</b></label></td>
                     <td style="padding-left: 170px; padding-top:15px;" flex><b>{{calBalance|currency:item.BaseCurrency}}</b></td>
                  </tr>
               </table>
            </div>
                <div layout layout-sm="column"  layout-margin style="margin-top:10px; " flex>
               <div flex="10" class="blankspace" ></div>
               <label>Payment Options</label>
               <!--  -->
              
               <img ng-repeat="tt in item.paymentOptions" src="{{tt.url}}" width="60px" height="60px" style="margin-top:-20px; padding:2px;">
            </div>
            <div layout layout-sm="column" layout-margin  flex>
               <div flex="10" class="blankspace"></div>
               <label>{{item.notes}}</label>
            </div>
            <div layout layout-sm="column" layout-margin  flex>
               <div flex="10" class="blankspace"></div>
               <label>Any damages must be noticed upon reciept of goods</label>
            </div>
            <div layout layout-sm="column" layout-margin style="margin-top:-20px;" flex>
               <div flex="10" class="blankspace"></div>
               <label>GST Registration No:1231564878</label>                    
            </div>
            <div layout layout-sm="column" layout-margin style="margin-top:-20px;" flex>
               <div flex="10" class="blankspace"></div>
               <label>PST Registration No:1231564878</label>
            </div>
            <md-divider></md-divider>
                <div layout layout-sm="column" layout-margin>
                    <section-title title="History & Comments"> </section-title>

                    <img src="../../img/material alperbert/avatar_tile_h_28.png" style="height:30px;margin-top: 30px;" />
                         <md-input-container flex >
                            <label>Write a comment</label>

                           <input id="new-todo" ng-model="item.addView"  ng-keyup="addTodo(item)"/>
                        </md-input-container>
                </div>
                <div layout layout-sm="column" layout-margin>
                   <section-title> </section-title>
                    <ul class="divbutton" id="todo-list" style="margin-top:-20px;">
                              <li ng-repeat="todo in item.commentsAndHistory | orderBy:todo.date" style="padding:10px; margin-left:-48px;" flex>
                                <img src="../../img/material alperbert/avatar_tile_h_28.png" />
                                
                                 <span  color="#A9A9A9" >{{todo.date|date}} </span> 
                                 <span color="#A9A9A9" style="margin-left:10px;">{{todo.RefID}}</span>
                                 <span color="#A9A9A9" style="margin-left:10px;">{{todo.text}}</span>
                                   <md-button  type="button"  ng-click="deleteNote(item,$index)" style="height:30px;" aria-label="change address" >
                                  <md-icon md-svg-icon="img/ic_highlight_remove_24px.svg" style="height:20px; width:20px;"></md-icon>
                                </md-button>

                              </li>
                            </ul>
                    </div>
                    <md-divider></md-divider>
                <div layout layout-sm="column" layout-margin>
                     <section-title title="Invoice History"> </section-title>
                    <table>
                        <tr>
                            <th flex style="padding: 30px;">Date</th>
                            <th style="padding: 30px;" flex>Invoice No</th>
                            <th style="padding: 30px;" flex>Amount</th>
                            <th style="padding: 30px;" flex>Status</th>
                        </tr>
                        <tr ng-repeat="item in ">
                            <td style="padding: 30px;"  flex>{{cc.Startdate|date}}</td>
                            <td style="padding: 30px;"flex>{{item.paymentid}}</td>
                            <td style="padding: 30px;"flex>{{item.total|currency}}</td>
                            <td style="padding: 30px;"flex>{{item.status}}</td>
                        </tr>
                    </table>
                </div>
            </md-content>
        </form>
    </md-whiteframe>
</div>
<div  class="lock-size" layout="row" >
    <md-button href class="md-fab" aria-label="Profile" ng-click="viewProfile()" style=" position:fixed;top:270px;right:50px;background:#db4437">
        <md-icon md-svg-src="img/ic_add_24px.svg" ></md-icon>
        <md-tooltip md-direction="left">All Recurring Profiles</md-tooltip>
    </md-button>
</div>

